name: Run Tests
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

jobs:
  drive:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
            channel: beta
            cache: true
      # Not needed for tests but pubspec.yaml requires it
      - name: Make envfile
        run: echo "API_URL=${{ secrets.API_URL }}" > .env
        
      - run: flutter test